{% extends "base.html" %}

{% block additional_imports %}
<script src="{{ STATIC_URL }}js/page_progress.js"></script>
<script>
	var status = {{ page.url.status }};
	var timestamp = {{ timestamp }};
	var pageid = {{ page.url.id }};
	var fetch_running = false;
	var check_interval = 5000;
	var progress_enabled = true;
	$(window).load( startProgress );
</script>
{% endblock %}

{% autoescape on %}
{% block title %} Image fetcher | {{ page.url.url }} {% endblock %}
{% endautoescape %}

{% block container %}
    <div class="container">
        <h1 style="text-align: center;">Saved images from  {{ page.url.url }}</h1>
        <br/>
        Images:
		<div>
			<div class="progress">
			  <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
				<span class="sr-only">60% Complete</span>
			  </div>
			</div>
		</div>
        <br />
        {% for image in images %}
    		<a href="{{MEDIA_URL}}{{image.id}}.{{image.ext}}">
				<img
					class="img_preview"
					src="{%if image.url.status == 2%}{{MEDIA_URL}}{{image.id}}.{{ image.ext }}{% else %}{{ image.url }}{% endif %}"
				/>
			</a>
        {% endfor %}
    </div>
    <hr>
{% endblock %}
